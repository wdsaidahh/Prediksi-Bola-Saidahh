<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard Prediksi Bola</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===============================
   BASE
================================ */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-image: url("https://statics.hokibagus.club/bosjoko/background/bosjoko_backgroundweb.png");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  transition: color 0.3s;
}

/* OVERLAY (KUNCI DARK/LIGHT) */
.bg-overlay {
  position: fixed;
  inset: 0;
  z-index: -1;
  transition: background 0.4s;
}

/* ===============================
   HEADER
================================ */
header {
  padding: 16px;
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  letter-spacing: 1px;
  background: linear-gradient(90deg, #b8860b, #ffd700);
  color: #121212;
}

/* ===============================
   LAYOUT
================================ */
.container {
  display: flex;
  max-width: 1200px;
  margin: 20px auto;
  gap: 20px;
  padding: 0 10px;
}

.sidebar {
  width: 220px;
  padding: 16px;
  border-radius: 10px;
  box-shadow: 0 4px 14px rgba(255,215,0,0.3);
}

.main {
  flex: 1;
}

/* ===============================
   FORM
================================ */
select, button {
  width: 100%;
  padding: 10px;
  font-size: 15px;
  margin-top: 10px;
  border-radius: 6px;
  border: 1px solid #ffd700;
  cursor: pointer;
}

/* ===============================
   TABLE
================================ */
.liga-box {
  margin-bottom: 28px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 8px 22px rgba(255,215,0,.35);
}

.liga-title {
  padding: 12px;
  font-weight: bold;
  text-align: center;
  font-size: 18px;
  background: linear-gradient(90deg, #b8860b, #ffd700);
  color: #121212;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 10px;
  text-align: center;
  font-weight: bold;
}

.match { color: #fff; }
.time { color: #ffd700; }
.score { color: #b8860b; }

/* ===============================
   DARK MODE
================================ */
body.dark {
  color: #fff;
}
body.dark .bg-overlay {
  background: rgba(0,0,0,0.75);
}
body.dark .sidebar {
  background: rgba(20,20,20,0.9);
  color: #ffd700;
}
body.dark select,
body.dark button {
  background: #121212;
  color: #ffd700;
}
body.dark th {
  background: #222;
  color: #ffd700;
}
body.dark td {
  border-bottom: 1px solid #444;
}
body.dark tr:nth-child(even) td {
  background: rgba(0,0,0,0.3);
}

/* ===============================
   LIGHT MODE
================================ */
body.light {
  color: #000;
}
body.light .bg-overlay {
  background: rgba(255,255,255,0.75);
}
body.light .sidebar {
  background: rgba(255,255,255,0.9);
  color: #b8860b;
}
body.light select,
body.light button {
  background: #fff;
  color: #b8860b;
}
body.light th {
  background: #fff8dc;
  color: #b8860b;
}
body.light td {
  border-bottom: 1px solid #ddd;
}
body.light tr:nth-child(even) td {
  background: rgba(255,255,255,0.6);
}

/* ===============================
   RESPONSIVE
================================ */
@media(max-width:768px){
  .container {
    flex-direction: column;
  }
  .sidebar {
    width: 100%;
  }
}
.match { color: #fff; } /* default (dark) */

body.light .match,
body.light .time,
body.light .score {
  color: #000 !important; /* HITAM */
}
</style>
</head>

<body class="dark">
<div class="bg-overlay"></div>

<header>
âš½ DASHBOARD PREDIKSI BOLA
</header>

<div class="container">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <h3 style="text-align:center;">Filter Liga</h3>
    <select id="ligaSelect" onchange="renderData()">
      <option value="ALL">Semua Liga</option>
    </select>
    <button onclick="toggleMode()">Dark / Light Mode</button>
  </div>

  <!-- CONTENT -->
  <div class="main" id="dashboard">
    Loading...
  </div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwjLFb_3hifBW4exvO5c4hES9nPPWCtPurikAmfyQeiqGOC1P6Xuc82xCw1IXMYBXFJ/exec";
let allData = [];
let ligaSet = new Set();

/* TOGGLE MODE */
function toggleMode() {
  document.body.classList.toggle("dark");
  document.body.classList.toggle("light");
  localStorage.setItem("mode", document.body.classList.contains("dark") ? "dark" : "light");
}

/* LOAD MODE */
(function(){
  const mode = localStorage.getItem("mode");
  if(mode){
    document.body.classList.remove("dark","light");
    document.body.classList.add(mode);
  }
})();

/* LOAD DATA */
async function loadData(){
  const res = await fetch(API_URL);
  const json = await res.json();
  allData = json.data;

  allData.forEach(r => ligaSet.add(r.liga));
  const select = document.getElementById("ligaSelect");
  ligaSet.forEach(l => {
    const opt = document.createElement("option");
    opt.value = l;
    opt.textContent = l;
    select.appendChild(opt);
  });

  renderData();
}

/* RENDER */
function renderData(){
  const liga = document.getElementById("ligaSelect").value;
  const filtered = liga === "ALL" ? allData : allData.filter(r => r.liga === liga);

  const grouped = {};
  filtered.forEach(r => {
    if(!grouped[r.liga]) grouped[r.liga] = [];
    grouped[r.liga].push(r);
  });

  let html = "";
  for(const l in grouped){
    html += `
      <div class="liga-box">
        <div class="liga-title">${l}</div>
        <table>
          <thead>
            <tr>
              <th>Pertandingan</th>
              <th>Waktu</th>
              <th>Prediksi</th>
            </tr>
          </thead>
          <tbody>
            ${grouped[l].map(r => `
              <tr>
                <td class="match">${r.home} VS ${r.away}</td>
                <td class="time">${r.tanggal} ${r.waktu}</td>
                <td class="score">${r.prediksi}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </div>
    `;
  }

  document.getElementById("dashboard").innerHTML = html;
}

loadData();
</script>

</body>
</html>